{% extends "base.html" %}
{% block content %}
{% if errors %}
<div id='errors'>
<ul>
    {% for e in errors %}
    <li>{{ e }}</li>
    {% endfor %}
</ul>
</div> <!-- id=errors -->
{% endif %}
<div id="title">
  <h2>{{ status['name'] }}</h2>
</div>

{% for step in status_order %}
  <div id="progress-container">
    <h3>
      <strong>{{ step.title() }}</strong> 
      {% if status[step]['complete'] %}
        <i class="fa fa-check" style="color: green;"></i>
      {% elif status[step]['progress'] > 0 %}
        <i class="fa fa-spinner fa-spin"></i>
      {% endif %}
    </h3>
    <div id="main-progress" class="progress">
      <div class="progress-bar progress-bar-warning {% if status[step]['progress'] > 0 %}progress-bar-striped active{% endif %}" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ status[step]['progress'] * 100 }}%"></div>
    </div>
    <div id="collapse{{ step.title() }}" class="panel-collapse collapse out collapse-progress">
      {% if status[step].get('platforms') %}
        {% for platform, data in status[step]['platforms'].items() %}
          <div id="{% if loop.first %}top-{% endif %}sub-progress-container" class="row">
            <h4 class="col-lg-2 col-lg-push-2">
              {% if data['complete'] %}
                <i class="fa fa-check" style="color: green;"></i> 
              {% elif data['progress'] > 0 %}
                <i class="fa fa-spinner fa-spin"></i> 
              {% endif %}
              {{ platform.title() }}
            </h4>
            <div id="sub-progress" class="col-lg-6 col-lg-push-2 progress">
              <div id="sub-progress-bar" style="width: {{ data['progress'] * 106 }}%" class="progress-bar progress-bar-warning {% if data['progress'] > 0 %}progress-bar-striped active{% endif %}" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="sub-progress text-center">Nothing to show yet!</div>
      {% endif %}
    </div>
    <div id="collapse-button">
      <a id="collapseText{{ loop.index }}" onClick="changeCollapseText({{ loop.index }});" data-toggle="collapse" data-parent="#accordion" href="#collapse{{ step.title() }}"><i class="fa fa-chevron-down"></i> expand <i class="fa fa-chevron-down"></i></a>
    </div>
  </div>
{% endfor %}
<div style="margin-bottom: 40px;"></div>

<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<script>
    $(document).ready(function(){ viewReleases(); });
</script>
{% endblock %}
